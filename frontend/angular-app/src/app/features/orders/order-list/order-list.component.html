<div class="flex items-center justify-between bg-gray-50 rounded shadow px-6 py-4 mb-8 relative">
    <nav class="flex items-center gap-2 text-sm">
        <a routerLink="/" class="text-blue-600 hover:underline font-medium">Home</a>
        <span class="text-gray-400">/</span>
        <span class="text-blue-700 font-semibold">Orders</span>
    </nav>
    <button (click)="openCreateOrderModal()"
        class="inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 transition font-semibold">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
        </svg>
        Create Order
    </button>

    <!-- Modal for Create Order -->
    <div *ngIf="showCreateOrderModal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40">
        <div class="bg-white rounded-lg shadow-lg max-w-2xl w-full relative animate-fade-in">
            <button (click)="closeCreateOrderModal()"
                class="absolute top-2 right-2 text-gray-400 hover:text-red-500 text-2xl font-bold">&times;</button>
            <app-order-create (orderPlaced)="onOrderPlaced()" (cancel)="closeCreateOrderModal()"></app-order-create>
        </div>
    </div>
</div>
<div class="shadow-lg rounded-lg bg-white my-8 p-6 relative">
    <table mat-table [dataSource]="dataSource" matSort (matSortChange)="onSort($event)"
        *ngIf="!loading && dataSource.data.length > 0" class="w-full border rounded mb-4">
        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="id" class="bg-gray-100 p-2 text-left cursor-pointer">
                <span class="flex items-center">
                    ID

                </span>
            </th>
            <td mat-cell *matCellDef="let o" class="p-2">
                <a [routerLink]="['/orders', o.id]" class="text-blue-600 hover:underline">{{ o.id }}</a>
            </td>
        </ng-container>
        <ng-container matColumnDef="customerName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="customerName"
                class="bg-gray-100 p-2 text-left cursor-pointer">
                <span class="flex items-center">
                    Customer

                </span>
            </th>
            <td mat-cell *matCellDef="let o" class="p-2">{{ o.customerName }}</td>
        </ng-container>
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="status"
                class="bg-gray-100 p-2 text-left cursor-pointer">
                <span class="flex items-center">
                    Status

                </span>
            </th>
            <td mat-cell *matCellDef="let o" class="p-2">
                <span class="inline-block px-2 py-1 rounded text-xs font-semibold min-w-[80px] text-center" [ngClass]="{
                            'bg-green-100 text-green-700': o.status === 'Completed',
                            'bg-yellow-100 text-yellow-700': o.status === 'Pending',
                            'bg-red-100 text-red-700': o.status === 'Cancelled',
                            'bg-gray-100 text-gray-700': o.status === 'New'
                        }">
                    {{ o.status }}
                </span>
            </td>
        </ng-container>
        <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="createdAt"
                class="bg-gray-100 p-2 text-left cursor-pointer">
                <span class="flex items-center">
                    Created At

                </span>
            </th>
            <td mat-cell *matCellDef="let o" class="p-2">{{ o.createdAt | date:'short' }}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <div class="mt-2 text-right" *ngIf="!loading && totalCount > pageSize">
        <mat-paginator [length]="totalCount" [pageSize]="pageSize" [pageIndex]="page-1" [pageSizeOptions]="[5, 10, 20]"
            (page)="onPage($event)">
        </mat-paginator>
    </div>
    <div *ngIf="!loading && dataSource.data.length === 0"
        class="text-center text-gray-400 my-8 flex flex-col items-center">
        <mat-icon class="text-5xl mb-2">inbox</mat-icon>
        <p>No orders found.</p>
    </div>
</div>